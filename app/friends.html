<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Linglear • Friends</title>
  <link rel="stylesheet" href="../assets/app.css"/>
</head>
<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand"><span class="logo-dot"></span> Linglear</div>
      <div class="pill">
        <small>Signed in as</small>
        <strong id="meName">—</strong>
      </div>
    </div>
  </div>

  <div class="container fade-in" id="pageFriends">
    <div class="card" style="padding:12px; margin-top:16px;">
      <div class="row" style="justify-content:space-between; flex-wrap:wrap; gap:8px;">
        <div style="font-weight:900">Friends Hub</div>
        <div class="row" style="gap:6px; flex-wrap:wrap;">
          <button class="btn small primary" data-friends-tab="friends">Friends <span id="tabCountFriends"></span></button>
          <button class="btn small" data-friends-tab="pending">Requests <span id="tabCountRequests"></span></button>
          <button class="btn small" data-friends-tab="mutual">Mutual Shows</button>
          <button class="btn small" data-friends-tab="circles">Circles</button>
        </div>
      </div>
      <div style="color:rgba(234,240,255,0.7); margin-top:8px;">
        Requests count updates live (SSE). Pending also refreshes periodically when open.
      </div>
    </div>

    <div class="grid">
      <div class="card" style="grid-column: span 5;" data-friends-pane="friends">
        <div class="card-header">
          <div class="card-title">Add Friends</div>
          <span class="badge"><span class="dot"></span>Growth</span>
        </div>
        <div class="card-body">
          <div style="font-weight:900">By friend code</div>
          <div class="row" style="margin-top:10px;">
            <input id="friendCodeInput" class="input" placeholder="e.g. DALTON-7F3K9Q"/>
            <button id="addByCodeBtn" class="btn primary">Send</button>
          </div>

          <div style="font-weight:900; margin-top:16px;">Invite by email</div>
          <div class="row" style="margin-top:10px;">
            <input id="friendEmailInput" class="input" placeholder="friend@email.com"/>
            <button id="inviteEmailBtn" class="btn">Invite</button>
          </div>

          <div style="color:rgba(234,240,255,0.7); margin-top:12px;">
            Tip: squads are coming next—friends will coordinate vote targets.
          </div>
        </div>
      </div>

      <div class="card" style="grid-column: span 7;" data-friends-pane="friends">
        <div class="card-header">
          <div class="card-title">Compare This Week</div>
          <span class="badge"><span class="dot"></span>Leaderboard</span>
        </div>
        <div class="card-body">
          <div class="list" id="compareList"></div>
          <div style="margin-top:10px; color:rgba(234,240,255,0.65);" id="statusFriends">—</div>
        </div>
      </div>

      <div class="card" style="grid-column: span 12;" data-friends-pane="friends">
        <div class="card-header">
          <div class="card-title">Your Friends</div>
          <span class="badge"><span class="dot"></span>List</span>
        </div>
        <div class="card-body">
          <div class="list" id="friendsList"></div>
        </div>
      </div>

      <!-- PENDING / REQUESTS -->
      <div class="card" style="grid-column: span 12; display:none;" data-friends-pane="pending">
        <div class="card-header">
          <div class="card-title">Pending Requests</div>
          <span class="badge"><span class="dot"></span><span id="pendingBadge">—</span></span>
        </div>
        <div class="card-body">
          <div style="font-weight:900">Incoming</div>
          <div class="list" id="incomingList" style="margin-top:8px;"></div>
          <div style="font-weight:900; margin-top:14px;">Outgoing</div>
          <div class="list" id="outgoingList" style="margin-top:8px;"></div>
          <div style="font-weight:900; margin-top:14px;">Blocked</div>
          <div class="list" id="blockedList" style="margin-top:8px;"></div>
          <div style="margin-top:10px; color:rgba(234,240,255,0.65);" id="pendingHint">—</div>
        </div>
      </div>

      <!-- MUTUAL SHOWS -->
      <div class="card" style="grid-column: span 12; display:none;" data-friends-pane="mutual">
        <div class="card-header">
          <div class="card-title">Mutual Shows</div>
          <span class="badge"><span class="dot"></span>Beta</span>
        </div>
        <div class="card-body">
          <div class="row" style="gap:8px; flex-wrap:wrap;">
            <select id="mutualFriendSelect" class="input" style="max-width:320px;"></select>
            <button id="loadMutualBtn" class="btn">Load</button>
          </div>
          <div class="list" id="mutualList" style="margin-top:12px;"></div>
          <div style="margin-top:10px; color:rgba(234,240,255,0.65);" id="mutualHint">Select a friend to see overlapping watch history.</div>
        </div>
      </div>

      <!-- CIRCLES / GROUPS -->
      <div class="card" style="grid-column: span 12; display:none;" data-friends-pane="circles">
        <div class="card-header">
          <div class="card-title">Circles</div>
          <span class="badge"><span class="dot"></span>Groups</span>
        </div>
        <div class="card-body">
          <div class="row" style="gap:8px; flex-wrap:wrap;">
            <input id="newGroupName" class="input" placeholder="New circle name (e.g. Money Heist Crew)" style="max-width:420px;"/>
            <button id="createGroupBtn" class="btn primary">Create</button>
          </div>
          <div class="list" id="groupsList" style="margin-top:12px;"></div>
          <div style="margin-top:10px; color:rgba(234,240,255,0.65);">
            Watching clubs + vote targeting will plug into circles next.
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="bottom-nav">
    <div class="wrap">
      <a class="navbtn" href="./home.html">Home</a>
      <a class="navbtn active" href="./friends.html">Friends</a>
      <a class="navbtn" href="./vote.html">Vote</a>
      <a class="navbtn" href="./community.html">Community</a>
    </div>
  </div>

  <script src="../assets/api.js"></script>
  <script src="../assets/sparks.js"></script>
  <script src="../assets/app.js"></script>
</body>
</html>
