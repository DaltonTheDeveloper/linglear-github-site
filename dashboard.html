<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Linglear ‚Äî Dashboard</title>
  <!-- Dashboard-specific styles -->
  <link rel="stylesheet" href="dashboard.css" />
  <meta name="theme-color" content="#071326" />
</head>
<body>
  <div id="bg"></div>

  <!-- Top bar -->
  <header class="topbar">
    <div class="brand">
      <!-- Use the fox logo so the dashboard matches the rest of the site -->
      <img class="brand-logo" src="fox-logo-glow.png" alt="Linglear" />
      <div class="brand-text">
        <div class="brand-name">Linglear</div>
        <div class="brand-sub">Subscriber Dashboard</div>
      </div>
    </div>

    <div class="topbar-right">
      <div id="netStatus" class="pill pill-neutral" title="Backend status">
        <span class="dot"></span>
        <span class="txt">Checking‚Ä¶</span>
      </div>

      <button id="btnOpenCmd" class="iconbtn" title="Command Palette" aria-label="Command Palette">
        <span class="icon">‚åò</span>
      </button>

      <div class="userchip" id="userChip">
        <div class="avatar" id="avatar">?</div>
        <div class="usertext">
          <!-- `auth.js` expects an element with id="userName" to populate the logged in user's email. -->
          <div class="username" id="userName">Loading‚Ä¶</div>
          <!-- This second line is not controlled by auth.js but can be used by dashboard.js to show a subtitle. -->
          <div class="usersub" id="userSub">Subscriber</div>
        </div>
        <!-- The logout button id must be `logoutBtn` so the original auth.js hooks its click handler. -->
        <button id="logoutBtn" class="linkbtn">Log out</button>
        <!-- Include a hidden login button so auth.js can toggle between login/logout. -->
        <button id="loginBtn" class="linkbtn" style="display:none;">Log in</button>
      </div>
    </div>
  </header>

  <!-- Layout -->
  <div class="layout">
    <aside class="sidebar">
      <nav class="nav">
        <a class="navitem" href="#/overview" data-route="overview">
          <span class="navicon">‚ö°</span>
          <span>Overview</span>
          <span class="navtag" id="navStreakTag">0d</span>
        </a>

        <a class="navitem" href="#/friends" data-route="friends">
          <span class="navicon">üë•</span>
          <span>Friends</span>
          <span class="navtag" id="navFriendsTag">0</span>
        </a>

        <a class="navitem" href="#/votes" data-route="votes">
          <span class="navicon">üó≥Ô∏è</span>
          <span>Votes</span>
          <span class="navtag" id="navCreditsTag">$0.00</span>
        </a>

        <a class="navitem" href="#/community" data-route="community">
          <span class="navicon">üèÜ</span>
          <span>Community</span>
          <span class="navtag" id="navRankTag">‚Äî</span>
        </a>
      </nav>

      <div class="sidecard">
        <div class="sidecard-title">Quick actions</div>
        <button class="btn btn-primary" id="btnAddWatch">+ Log Watch Time</button>
        <button class="btn btn-ghost" id="btnClaimDaily">Claim Daily Bonus</button>
      </div>

      <div class="sidefoot">
        <div class="muted">v0.1 ‚Ä¢ Dashboard-only</div>
        <div class="muted">Raw HTML/CSS/JS</div>
      </div>
    </aside>

    <main class="main">
      <div class="main-inner">
        <!-- Route views -->
        <section id="view-overview" class="view"></section>
        <section id="view-friends" class="view"></section>
        <section id="view-votes" class="view"></section>
        <section id="view-community" class="view"></section>
      </div>
    </main>
  </div>

  <!-- Toasts -->
  <div id="toasts" class="toasts" aria-live="polite" aria-atomic="true"></div>

  <!-- Command palette -->
  <div id="cmdOverlay" class="overlay hidden" role="dialog" aria-modal="true">
    <div class="cmd">
      <input id="cmdInput" class="cmd-input" placeholder="Type a command‚Ä¶ (overview, friends, votes, community, logout)" />
      <div id="cmdList" class="cmd-list"></div>
      <div class="cmd-hint muted">Tip: Press <b>Esc</b> to close. Use <b>/</b> to open.</div>
    </div>
  </div>

  <!-- Auth & dashboard logic -->
  <script src="auth.js"></script>

  <!-- ‚úÖ REQUIRED: API client that uses https://api.linglear.com by default
       IMPORTANT: must be a classic script (NOT type=module) so it runs before dashboard.js
       and populates window.LinglearAPI / window.apiGet, etc.
  -->
  <script src="assets/api.js"></script>

  <script src="dashboard.js"></script>
</body>
</html>
